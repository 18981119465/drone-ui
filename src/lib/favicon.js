const STATES = ["default", "running"];

let animationIntervalId = null;

const favicon = {
  setState(state) {
    if (STATES.includes(state)) {
      favicon.applyState[state]();
    } else {
      console.error("Favicon.setState: invalid argument"); // eslint-disable-line no-console
    }
  },

  animateWithSteps(steps) {
    favicon.stopAnimation();
    let position = 0;

    animationIntervalId = setInterval(function() {
      favicon.setIcon(steps[position]);

      position = position + 1 === steps.length ? 0 : position + 1;
    }, 1000);
  },

  stopAnimation() {
    if (animationIntervalId) {
      clearInterval(animationIntervalId);
      animationIntervalId = null;
    }
  },

  setIcon(href) {
    const currentLink = document.getElementById("favicon");
    const head = currentLink.parentNode;

    const nextLink = document.createElement("link");
    nextLink.setAttribute("href", href);
    nextLink.setAttribute("rel", "icon");
    nextLink.setAttribute("type", "image/png");
    nextLink.setAttribute("id", "favicon");

    head.removeChild(currentLink);
    head.appendChild(nextLink);
  },

  applyState: {
    default() {
      favicon.stopAnimation();
      favicon.setIcon("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAAEEfUpiAAAABGdBTUEAALGPC/xhBQAABh5JREFUWAm1V1tslEUUnvPvbres2EIK1u4WWkITFOi22ETFC1SD3ZarD/bBGAwmhkQkiqKJD4pENN4SxRsRfJDAk/ZBRaHsJiKYGOShlu4KKoL2QrcopUgLpN3l/8fvTDt/ZrfbpYlxkv3PnOucOXPOmVkhxkZZdcMQT4k/QCQV+G9QhDHOVEb6EjFyJZjAw8MfSH1cHKySQ+fO/K70mVheszLEtixGeNhO6ixDYipPeLhGZy9qmt/d3noyGG6ISymqR9mjAlYwHNmRvmafYM1kPBY2mWNrWK2ayIRgQWUBm2YanE6oCSPm2ozzcH1gpK5uvS+Z6jouSPb3xWNLmcbD3TlLm1bAuJBMxGbAyYYUSzJTmSTrSYbYa0llbWOlqwWHfoRcDbY5hRUsEhscKXa4kQLjzkJfcRkzPURNsPC6EuSPHsPpwW/YvC3Ew4jJNKZTKBx515FykxYyIQtbvfHoM9jLzyaD5z6LFjJ0A8WIHtlnoukMLaLtyugYURkYDWKnCgfTeWmGwZrIxmRH9EOe8wiFm+53pP2tQohO9MWjCylbWTHxYSNIhNuklG2aRoK2JRPRLdpDIrpq9aU7XQFD8CjPpZBuoozhLzGEYovCpQx4Ef8BRswBxcVY5TmEupTpVYuaZp5ubz2vZeBVs56rvZo5ohn5oI5RqCay2T2FYHVDP+dPPkWT5y3wVPW0tZ5xDWjmnEXLK0Zs+yTcDGiahmTRRziVjRpnOM4AE0O1kRXSlk9JQYuJ5DnE6ZC/JLip8/DuYeabY5yBYN2qGTI14gYsU5hGppcUzThxuOWyprvVgKifxe+9ZNvX/WhMM7WACXE6/oELl4aCtQ13abryAIrtcLOWiai793F8T7MnAe+11OljrYNauCzckEByqBooKios+u2HfUM0uyayIO3IrGKhd/oS0c2sWF7bWO8IZ1ryeOxLxoPVkQ54EkZWppCVfsp1fB7hDZ9NHEhgxTRW9LIiD33+Om88U4sDVq6zZ+Xm5maPqcwGsPoahnrYly9td4OoiRq2tLSgcWQOj/BcNCmI1305DSDKDyhBok5XgcjuSRz4ft7dq2/UNCmpNKcBaYsYC6He5/C+77ml2Iu5isXQsPRrAzjCY27b1MQMaFmNfR0Ho0wL1S6vdWx7LZ+OTjYiz2oqC0f2CCnXZijmQcw8UUnHsvpY8uhlsLQRJqoY+IRvbobE9ZGHtIgy0J3Y/8dkjSAD40j1kDYwvhprIp9KR67TAhqiD/b7vN4lXT/t/0XTGI4zYDL1PFTT+CyMvogamK5p+SB3a1j+3G95tv7ZfqArr2wuJl+racd5pDcee03z+ehFeuQQqt59RGjedSFuRp/0reFQZ8tmRGBWeMVCW6YPm/VpnjgrZzpCeGHJryyLTqFuu7DrABysQqQiwFXbMRfEYhe8wne76YjrQDDcuFVK52VTwZxnO2LyJprD2YBIpz7D/bDSlDGvd+UAuswH8DrjsjAV9ByXym5cKo9pHL1yuePInVigXNPgaFqSeDPorXylrW1XmuncU23b+U7LKEi0F+3hUULjeRC944sMZi6ExN94vKmLmtnotUcQ5iW5RBWNxDWvp7Cip31fknHcGm/heJ435bmVWMKmx03iRHPUHz/x1FB5kG9xlsJF4NjDbv+GftatAxFpb+YL4d5Rs9f7yqX19VtVR1U9jOiTfBo4it4SUbpHyzhCLNNzA9YhH+RfBmHCKcJXfGrgqHuOyXh0vd8T4L6wk5sMKyKh+N1wBHgdulV5PL73CtOR4BsmaNg9fB3shMx6FpzcIAcLvJCMH3x7cvKjUpnl62ruovLFzVOcK4P9uZ5SrljeCQ1h5wlsH1GQN+E1NRe7dd812eWrHYHJWdPnFZeqMqwIr5qTlqlfUYoFedf6D8xsR7Qp5QAjVXc0FV256uBhLedr5v8B0TW39HZEt2nbrgOaoJ59ttiH6pj0U1nr5oVE5wu83qWTvg0X1DdP/WdgcBuy/wkcjfuQybtIFhO1nyJLvHqzt+IN3RWzRLhyJjcq69cVpi8mlzmOWAmtW6FYBufw15Ic/MXtRuPpRnV04ZHSWuabdXCiBbNX+xd0bpKI7Ls03wAAAABJRU5ErkJggg==");
    },

    running() {
      favicon.animateWithSteps([
        "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAAEEfUpiAAAABGdBTUEAALGPC/xhBQAABCxJREFUWAm1VzGIlUcQnvn/dwTucoJpAmkCUXKe+g5yBxe4NBbBxl6SYCcW1oqtl0o0sUmTIlglREnqNCGFjYKCCu8ZTyUBba5U8Lwjwfvf5pvZf/Z2/90X34H+8P7d/WZmZ/+Z2W/3EbWPG0w76bK8bCD9yga8sKXCTEO0yP25Z1k7eLGZKMD8UzKhCFMNosZP+mB6kbbpjs1jrXoWB2Iaz+3cqi5PsIoPvbhtFiLQ/vCbCy22ri5k4IYzP5JzJ0yA9n246LVj33RdCVr+ctXn57yw+Z736SfovN1eASo3nH6iEqab8lkWVMGwrm9DYBLBYOZniL9UQ+eO9LqLi8c9enjnI9WUKdus2ljaiuc3HuNjnhNXXwcB159Rj5bC2DpubaYf+li8udIWSxGZW5v92HSk9XESw1duEAte34/iyPObw8wgCVs9n8v5O8FCGGOFOKQx7gYzKDm3GGPFTLrB7IFYaaefGgu+U22FFEB8FzqPsM4vyO3o6oTIBPc3bkbliFSRrx9V0Jd6XIRx/tTNPzkYIVJncRojUdINn5CgGCRVVfc+jXderJsE0YpE6jdWotH2LzaOi02wsAKk6FkeAzPrtChjPrglAW4rcTfGNtcUL0gB+k9g+s3wSVur3jYG/HduWM8HBkBZ53KPsKQLdHUmUeifq5lXRzEGarmBelgJGNNTqnrHC3uB74Kt8r0OyyS17UxJGlvsUfAyQSefQOq+8IzbYFW7ddeDDTYNauJiGKPjOb9ZizHqLyORoFkB3XB2hVxzI1FghMzxNWBz0Eg4QPSMM/wEg+ltYLUIJn6m6jkhXB+DHoVDcrIJwIfK1qBtMdC69jTdkFA20U5MbEahdTl0QfFyKBk8to25QIttjGbYjWPkGVysXNNivsz9zbM2nKQtLsDppYH/QPb24LOvIlLfo3+U3OgUJv3gNROv4xT8AaH6nWh0GjWEQ5ZfUM99bhQS2ycLiBzr2R4rvpk+eL+zkLAAZdNXzQM42l057n5lDU3VB60KwwJknuKGKjnwm+weRMYbc9i/n2RHX9HWH4cmClyi54hrfjVBueVLJFTZ3wKFbC7h91X7WxJMZMj3pbJti8JHfGYV6LRgrl+MsC1sPCxIM0iJj5HO7mUg02yJoICnEDhtUudiqLqeB9N5CqOQgoIshkCou34msqkIlw7s9cs435+Od+EW5UgMfwXGK+rRocdn4QQIZuJLfMqFJ4DouOG7qyCb8zGW9eWAd/XJbkravF9Jzu3MGAA4nfsvV02U3qDI7TPB2FYvBs0auL6j0uALOlBxmPoINaBXNkfHijZvEoSP+HqYpED8vD06zmlY/GULEFAev8rqX6NMxeTSe//2Xwj1h6rUfUlxHV7ez3xdbhj6+Avz6B27SRpu7dgFmEK31b/ozfatLq7j/7nGF/UB/geQxdFuNGaybwAAAABJRU5ErkJggg==",
        "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACEAAAAhCAYAAAEg4/L5AAAABGdBTUEAALGPC/xhBQAABU9JREFUWAmtV11sFFUUPmd2aen+tKXVBlEDpIqkZauRRB/UIFIiFtH4x5M/GMKDj8YSfTAGH/yJojyYkKikiT/40iAPJhqjvKAhhh9Jut0CEdNqQhUa0mKXBdrdOX73zt6ZOzvTLdFOsnP+vnvuPeeee+4sUczDSidDKTE27imxYwsaMLpicSzSAOOpFLKPKUtkaGhGNTvXLiHiUPtQWhupUY1Nt/AdF8/5IxSgFmTr/Oi0t3y6R1ORYAbofEEbrfwoWeVI0cgj+fQpW6lRkk/9REL3hwxVDx6gxn0A5MOOHYmatzr3FQ1iueSQwy9owaEdZiRAKc0L9TmYe4MWXPrUACyvCZbTN2RppvSPMdpUT2kU1ihPxXSNc6XFxq6pFJrvCSkgRLKFRPWTyPuwFCmR3EiVytuQ15uB1SiNqGnICRw8iwFfhBBxAtPvSECncVg/4UzbEc+AjLQup/LMCPx5abQdJ1Y2JiWf2Uri2moEyZ9z7rK3F7Bw19QfIGkkbS3ocR/MtIW7CzN+OKGsMv2JFSz3wVVGCulNVJHvQnrm771w8qlriLEhZFQC0zFUx15y6Snk6tGIXUFUSRkDkvoNHP2MQ/YGdNHYDdCjJQxOh1U1kgot+KVPK7MMZ+/TukLmoRp4vCiydpGxyHD6eRlOfSS/tTUbnU39UJRSCt0N5I5NIPZm4sST5LhNSOJ+a8A4QrjZksOVGtoZG2XxprCMKtRdjLIexSRltAhXhjKfKJzvQIYzb9YbaNkS2DWE7uoGgJaR7tVLd121jcGj6oEWteklsxPrHCsZQzNOn0D67g5GgmMeQHlvt3U46vdSpfyLraPc5mSomxtjbaKMvjbJCudUwWUDmoeO2XZU8XteEpkPhQxWj7f14FeEZJGdngORh0OG4cxUSIaAivygVqdklnxLJ8ns2TgjqewzTZDr7oHdL+8Ay19hP+E9n/4L5bs0MMzDMX+JXXpOobwQ1hSXYaYD6AMvzzPUM6/p22ZwegVGUBR18Rre79i6CJ901nFX8bDSJyNG5lGEE6izHU28cuwqwryIEj7HPZf1bRwA5uBEnklIPvvEHGZfHQnBt1iMnM100BV6Cx29D2vewl2lX41ZRlI3UZkLCHuJ0YGWkdOjJHwAK/7Q0seycy4Ch20zKmUPUnJ77MjrU87fh+HHq4Y4h8K9/3MBymsKxXFeqj1dRltbcWVtkFPZdnvK2EWI7HKQzm4b+N956aCKe0g3lemZSbT7H6lcuYDF3GV8egcLX7RUnDiJqmvHWW0Bjd6fZkSYzkI8j3bYhKyFogvD5pKcrdxTHPSOxvTELhTWag21TkX8UP6Mcqt3MJ9QC4g8SPUqmnXV3X1jxBhRuL1QDbLen3IFNyQ2oN7DPE2phlu5c/JSPZix4TzvRnZeMXKEMt+JNjWk9Nj7xkacgm8joIiCX7/eBaihmKAf74mIG6Ng2hSwhgNFJZ/Be5WlCljm3XC8M1DU50QeTFL+aAmomC5vj+WT/unQXzwskbvGh4v047/V475chxF16eWPqYtwngUAwbTfOx35zEvohnvr+LVN4zgN25CVH2yl4vGB0IYPhI/BPl1ri5f5AuWKS/1ixFa8CzevxoMXUMvOPsxzBq1gCpfzEe4ujviLUNNgIS/iPbCAUwaumP+m9pZOXjau6iT0hBYRslQFtNxucuXgArRwXNhODnf3cO08fmHWGoyMdOGGxEVW9+FJFNhx/L7G72oEynQQNdoZtwCFnTcTxiGK7jZ8WKHDuRtxRa/Hti3BaPxbSzzAuekjBqeoDGXRfWUd5R7ZxzxYsW1x/L8/6Qj/82KQZwAAAABJRU5ErkJggg==",
        "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACEAAAAhCAYAAAEg4/L5AAAABGdBTUEAALGPC/xhBQAABR9JREFUWAmtV2toHFUUPmdm0iS7m0dTSU2wNUSjrekWwdqKQvFRf6gIIrQgvilaHwjF1x+lVH+IqFAqFWlV0EiL5pf+E2wl+EMhqEgmqUqsgVaDIWmSmmy2eexcvzuz986dx2430IHZOY/vnHvuOec+lijlYSkTQxmhdLx1gS2TUbQWmmilrP5l00QOEBlRKhNhaIfCbdsgGR+hpKY/Xyl9KpBWtjfl+MqJghBw72Y939h21lm+wOfws/7fBUkyc5iC3v+m9XDamzLIv2ozHwy8KZn8iqHcPpOXdGUvRCUkwrHESPP2xBCBG1t+LPJKLwY83GGafvrKAmkoy7IU8PatCkiNnQ0+zXTOIiEeDRSlHzSgOH6xTA/6QVaIAQFYbzqBK56DpybtAYQZiylHLrInIoI0Rg5pvD9JDPgDgazpgbhNmEw3OwXolyTouTgowTP9yPkFnZnqk2XuI9v+kFa8+4i81xPOIPBroBQyVEWjVEd4y8ILmi8TYji7nzxxKCY/5gg3+woy+k5EIVjVJSImwWcx5VDGDRs5P33uEtOhvZRrP0ELkw9SSRwPrUMqMh0pRlTvIqqXQ0glir8D+k7VA7o6Ci6GM0+RR8eQsl+wEO5F9P0w2Kn0ylDxVb/CbblGjGSfqApKU2I6bxlNJsSZtS0SV5adidvoXc5QbDRoosLirFH27sBRS7fCBBU5nemgEn2NuY8hmXuUstLXzEXgwM14SFgiqZUcAHkUbf6M1DPm/AhG/TwFvEJs7yHLK6IfPoG+M4Gx+G2O7Jgh4meEuS1k/SQeAf+8KUMkXnkK2XFE0aGU5hyVTH6NZGqxJcZaW01jramFsPkei+aWZmrBpmG4t/AN+oAn40qEejQhczOvJWTioIUqZPaihB/HlXDsklN3P4nlRfTIt8jAlgSGuV/XHuV8D7l4KQGqIpDJ1q3M+UINy9n39g+iu0A2Pyy5YN8HUe4HH1HlZwyj6nUgcWEE8nTFwamT6sjOM84riWYelZ9VPajI0zhsnqxkpJNYCSDlYqhlLc7jXSDvxraPl7rwymeZ6vgm3lxwAzb4LQ+4nho7DnHPn4umLo2uLQg38wHapfqBxnweA0yiIJuSA/Epcng/3zA/nNQhu3GhLKp565GpBOp9BFEfx66SL1J+ezPzwErcLhIE0vgpkv94HHR5eB5GeballccPotzS8kJ0y+UZsIoXpq+gncAhPosu/4zz878Fa2uk6Y3aA+CTWJL7eOuFv+JDibGuBpqb7EM2d8d1mhdUvlHJW4S4Cz8363KI0WvrqTj+O4RdeJMP4/JH1IOdZCKpjErKvmSQydMlCsUWYO3WmwQ1XLTQgFfHMZoX1mO1BCDxft3r1tymbasRntjhoBl3YfA+mpnWJ1aqjV265HqP2K0sFyN8nGHrDvTDgBRbZNNUTaeeR/3449AW91WRF5R6+fPx+DNG65oHla2F0+9XdOkXSlDxKyhHpZXzyNxxMdK7Jg0nV5lwc88GZ7zfdGkw9CNyPzVbwFF3WAKCJTradhUVFz/ChQZXNpb3gc3p1pdVWiS7fhP3zpzVq8N0L8TtDg0PDiDi2prLNK6N/puuaL2eO8f9/6Xh6jCMg62VE9urAVkFiX2l0Wr3r2f5AnrQ6QG9QQUgHaVmQirE6dxO3CQPozQ3Sj7yyMaq5QrLNIir646IbQpTMQgT61/vi0sHMPB1ZGUe4t7JeaXHMd+NE30IfFbJMLc/MI2T5Fj9ODm/D+Xp1P+tVPXFGcGAzAAAAABJRU5ErkJggg=="
      ]);
    }
  }
};

export default favicon;
